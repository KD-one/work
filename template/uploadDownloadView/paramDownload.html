{{ define "uploadDownloadView/paramDownload.html" }}
<html xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>根据参数下载文件</title>
    <script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
        <style>
            body {
                font-family: Arial, sans-serif;
                background-image: url("images/file2.jpg");
                background-size: cover;
                display: flex;
                justify-content: center;
                align-items: center;
                height: 100vh;
                margin: 0;
            }
            .container {
                background-color: #fff;
                padding: 20px;
                border-radius: 8px;
                box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
                width: 300px;
                text-align: center;
            }
            input[type="text"] {
                width: 100%;
                padding: 10px;
                margin: 8px 0;
                display: inline-block;
                border: 1px solid #ccc;
                border-radius: 4px;
                box-sizing: border-box;
            }
            button {
                background-color: #4CAF50;
                color: white;
                padding: 14px 20px;
                margin: 8px 0;
                border: none;
                border-radius: 4px;
                cursor: pointer;
                width: 100%;
            }
            button:hover {
                background-color: #45a049;
            }
        </style>
</head>
<body>
<div class="container">
    <h1 style="text-align: center;">文件下载</h1>
<div>
    <label for="SoftwareVersionBranch">软件项目名：</label>
    <input type="text" id="SoftwareVersionBranch">
</div>
<div>
    <label for="SoftwareVersionNumber">软件版本号：</label>
    <input type="text" id="SoftwareVersionNumber">
</div>
<div>
    <label for="name">软件名称：</label>
    <input type="text" id="name">
</div>
<button id="downloadButton">下载</button>
</div>
<div id="message"></div>

<script>
    $(document).ready(function() {
        $('#downloadButton').click(function() {
            var SoftwareVersionBranch = $('#SoftwareVersionBranch').val();
            var SoftwareVersionNumber = $('#SoftwareVersionNumber').val();
            var name = $('#name').val();

            // 不使用Ajax直接下载，而是创建一个隐藏的form并提交表单
            var form = document.createElement('form');
            form.action = '/download';
            form.method = 'GET';

            var inputSoftwareVersionBranch = document.createElement('input');
            inputSoftwareVersionBranch.type = 'hidden';
            inputSoftwareVersionBranch.name = 'SoftwareVersionBranch';
            inputSoftwareVersionBranch.value = SoftwareVersionBranch;
            form.appendChild(inputSoftwareVersionBranch);

            var inputSoftwareVersionNumber = document.createElement('input');
            inputSoftwareVersionNumber.type = 'hidden';
            inputSoftwareVersionNumber.name = 'SoftwareVersionNumber';
            inputSoftwareVersionNumber.value = SoftwareVersionNumber;
            form.appendChild(inputSoftwareVersionNumber);

            var inputName = document.createElement('input');
            inputName.type = 'hidden';
            inputName.name = 'name';
            inputName.value = name;
            form.appendChild(inputName);

            document.body.appendChild(form);
            form.submit();
            document.body.removeChild(form); // 提交后移除form

            // 下载成功提示可以保留，但通常浏览器会自动开始下载而不会回调success
            // success: function(response) {
            //     $('#message').text(response.message);
            // },
            // error: function(xhr, status, error) {
            //     var errorMessage = JSON.parse(xhr.responseText).message;
            //     $('#message').text(errorMessage);
            // }
        });
    });
</script>
</body>
<!--<head>-->
<!--    <title>游客文件下载</title>-->
<!--    <script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>-->
<!--    <style>-->
<!--        body {-->
<!--            font-family: Arial, sans-serif;-->
<!--            background-color: #f4f4f4;-->
<!--            display: flex;-->
<!--            justify-content: center;-->
<!--            align-items: center;-->
<!--            height: 100vh;-->
<!--            margin: 0;-->
<!--        }-->
<!--        /*.container {*/-->
<!--        /*    text-align: center;*/-->
<!--        /*}*/-->
<!--        input[type="text"] {-->
<!--            width: 100%;-->
<!--            padding: 10px;-->
<!--            margin: 8px 0;-->
<!--            display: inline-block;-->
<!--            border: 1px solid #ccc;-->
<!--            border-radius: 4px;-->
<!--            box-sizing: border-box;-->
<!--        }-->
<!--        button {-->
<!--            background-color: #4CAF50;-->
<!--            color: white;-->
<!--            padding: 14px 20px;-->
<!--            margin: 8px 0;-->
<!--            border: none;-->
<!--            border-radius: 4px;-->
<!--            cursor: pointer;-->
<!--            width: 100%;-->
<!--        }-->
<!--        button:hover {-->
<!--            background-color: #45a049;-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->
<!--<div class="container">-->
<!--    <h1 style="text-align: center;">文件下载</h1>-->
<!--        <div>-->
<!--            <p style="text-align: center">文件参数：</p>-->
<!--            <div>-->
<!--                <span>项目号：</span><input type="text" id="branch" placeholder="项目号"><br>-->
<!--                <span>版本号：</span><input type="text" id="number" placeholder="版本号"><br>-->
<!--                <span>软件名：</span><input type="text" id="name" placeholder="软件名"><br>-->
<!--            </div>-->
<!--            <button id="downloadBtn">下载</button>-->
<!--        </div>-->
<!--</div>-->
<!--<div id="message"></div>-->
<!--<script>-->
<!--    $(document).ready(function() {-->
<!--        $('#downloadBtn').click(function() {-->
<!--            var branch = $('#branch').val();-->
<!--            var number = $('#number').val();-->
<!--            var name = $('#name').val();-->
<!--            $.ajax({-->
<!--                url: "/download?SoftwareVersionBranch="+branch+"&SoftwareVersionNumber="+number+"&name="+name,-->
<!--                type: "GET",-->
<!--                success: function(response) {-->
<!--                    $('#message').text(response.message);-->
<!--                },-->
<!--                error: function(xhr, status, error) {-->
<!--                    var responseJson = JSON.parse(xhr.responseText).message;-->
<!--                    $('#message').text("Error: " + responseJson);-->
<!--                }-->
<!--            });-->
<!--        });-->
<!--    });-->
<!--</script>-->
<!--</body>-->
</html>
{{ end }}